<script type="text/javascript">
    RED.nodes.registerType('api-create-child',{
        category: 'cumulocity_api',
        color: '#a6bbcf',
        defaults: {
            name: {value:""},
			parentManagedObjectId: {value:""},
			managedObjectReference: {value:""},
			tenant: {value:"", type:"config-cumulocity-tenant"}
        },
        inputs:1,
        outputs:1,
        icon: "cumulocity.png",
		paletteLabel : "register child device",			
        label: function() {
            return this.name||"register child device";
        }
    });
</script>

<script type="text/x-red" data-template-name="api-create-child">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
	<div class="form-row">
        <label for="node-input-parentManagedObjectId"><i class="icon-tag"></i> Parent ManagedObject Id</label>
        <input type="text" id="node-input-parentManagedObjectId" placeholder="Parent ManagedObject Id">
    </div>
	<div class="form-row">
        <label for="node-input-managedObjectReference"><i class="icon-tag"></i> Child ManagedObject Reference</label>
        <input type="text" id="node-input-managedObjectReference" placeholder="Child ManagedObject Reference">
    </div>
	 <div class="form-row">
        <label for="node-input-tenant"><i class="icon-tag"></i> Tenant</label>
        <input type="text" id="node-input-tenant" placeholder="Tenant">
    </div>
</script>

<script type="text/x-red" data-help-name="api-create-child">
<p>A node that creates the device in the inventory of your cumulocity tenant</p>

<h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">Name <span class="property-type">string</span></dt>
        <dd> Name for this node.</dd>
		<dt class="optional">parentManagedObjectId <span class="property-type">string</span></dt>
        <dd> The managed object id of the parent. Could also come from <code>msg.parentManagedObjectId</code> </dd>
		<dt class="optional">managedObjectReference <span class="property-type">string</span></dt>
        <dd> Managed object reference of the child. Could also come from <code>msg.managedObjectReference</code> </dd>
		<dt>Tenant <span class="property-type">configuration</span></dt>
        <dd> Tenant Configuration Object that contains the connection information for this tenant </dd>		
    </dl>

 <h3>Outputs</h3>
	<dl class="message-properties">
		<dt>managedObject <span class="property-type">json</span></dt>
		<dd>The managedObject that was provided as <code>msg.managedObject</code> (if any)</dd>
		<dt>data <span class="property-type">json</span></dt>
		<dd>The response of the call (if any)</dd>
		<dt>statusCode <span class="property-type">string</span></dt>
		<dd>The statusCode of the call</dd>
		<dt>statusMessage <span class="property-type">string</span></dt>
		<dd>The statusMessage of the call</dd>
		<dt>location <span class="property-type">json</span></dt>
		<dd>The reference location response of the call (if any)</dd>
	</dl>

<h3>Details</h3>
    <p>This node will call the create child managed object operation on the REST API. 
	To know what data to send and what response you get from the operation see the references</p>

<h3>References</h3>
    <ul>
		<li><a href="https://www.cumulocity.com/guides/rest/device-integration/#step-5-discover-child-devices-and-create-or-update-them-in-the-inventory">Create child device</a> - Cumulocity docs</li>
	    <li><a href="https://github.com/i8c">GitHub Project</a> - i8c-c8y-nodered</li>
        <li><a href="https://www.cumulocity.com/guides/rest/device-integration/">Cumulocity REST API docs</a></li>
    </ul>
</script>